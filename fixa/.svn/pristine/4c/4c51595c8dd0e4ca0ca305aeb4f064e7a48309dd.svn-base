<?php

class SolicitacaoGcom {           
	public $id_usuario_gcom;          
	public $data_receb_documento;     
	public $tipo_entrada;             
	public $id_contrato_mae;          
	public $data_assinatura_doc;      
	public $numero_documento;         
	public $id_sistema_validacao;     
	public $n_vantive;                
	public $id_produto;               
	public $data_tratativa;             
	public $nome_solicitante ;        
	public $n_gestao_servicos;        
	public $numero_wcd;               
	public $razao_social;             
	public $cnpj;                     
	public $plano_solicitado;         
	public $qtde_acesso;              
	public $data_finalizacao;         
	public $reg_dt_entrada;           
	public $revisao;
	public $id_solicitacao;

	function constroiSolicitacaoGcom(SolicitacaoGcom $solicitacao, $n_gestao_servicos, $tipo_entrada, $id_contrato_mae, $data_assinatura_doc, $numero_documento, $id_sistema_validacao, $n_vantive, $id_produto, $data_tratativa, $nome_solicitante, $numero_wcd, $razao_social,$cnpj, $plano_solicitado, $qtde_acesso, $data_finalizacao, $reg_dt_entrada)
	{
		$solicitacao->n_gestao_servicos 	= $n_gestao_servicos;
		$solicitacao->tipo_entrada			= $tipo_entrada;             
		$solicitacao->id_contrato_mae		= $id_contrato_mae;          
		$solicitacao->data_assinatura_doc	= $data_assinatura_doc;      
		$solicitacao->numero_documento		= $numero_documento;         
		$solicitacao->id_sistema_validacao	= $id_sistema_validacao;     
		$solicitacao->n_vantive				= $n_vantive;                
		$solicitacao->id_produto			= $id_produto;               
		$solicitacao->data_tratativa		= $data_tratativa;             
		$solicitacao->nome_solicitante 		= $nome_solicitante;        
		$solicitacao->numero_wcd			= $numero_wcd;               
		$solicitacao->razao_social			= $razao_social;             
		$solicitacao->cnpj					= $cnpj;                     
		$solicitacao->plano_solicitado		= $plano_solicitado;         
		$solicitacao->qtde_acesso			= $qtde_acesso;              
		$solicitacao->data_finalizacao		= $data_finalizacao;         
		$solicitacao->reg_dt_entrada		= $reg_dt_entrada;           
	}

	//busca data que o operador habilitou a solicitacao
     function buscaDataRecebimentoSolicitacao($id_solicitacao, $id_usuario, $revisao)
     {
          $busca_data_receb_solicitacao = mysql_query("SELECT 
                                                            date_format(reg_data,'%d/%m/%Y %H:%i:%s') AS reg_data 
                                                       FROM usuario_solicitacao 
                                                       WHERE id_solicitacao LIKE '%$id_solicitacao%' AND id_usuario = $id_usuario AND revisao = $revisao
                                                  ");

          if(mysql_affected_rows() > 0)
          {
                 while($linhaSolicitacao=mysql_fetch_array($busca_data_receb_solicitacao))
                 { 
                     $data_receb_solicitacao  = $linhaSolicitacao['reg_data'];
                 }

                 return $data_receb_solicitacao;
          } 
     }

     function validaCamposObrigatorios(SolicitacaoGcom $solicitacao)
     {
          //valida campos obrigatórios
          if(
          	   ($solicitacao->n_gestao_servicos == "")       ||
               ($solicitacao->tipo_entrada == "")      		 ||
               ($solicitacao->id_contrato_mae == "")         ||
               ($solicitacao->data_assinatura_doc == "")   	 ||
               ($solicitacao->numero_documento == "")    	 ||
       		   ($solicitacao->id_sistema_validacao == "")    ||
               ($solicitacao->n_vantive == "")             	 ||    
               ($solicitacao->id_produto == "")              ||
               ($solicitacao->data_tratativa == "")          ||
               ($solicitacao->nome_solicitante == "")        ||
               ($solicitacao->numero_wcd == "")              ||
               ($solicitacao->razao_social == "")            ||
               ($solicitacao->cnpj == "")                    ||
               ($solicitacao->plano_solicitado == "")        ||
               ($solicitacao->qtde_acesso == "")             ||
               ($solicitacao->data_finalizacao == "") 
          )
          {
               return true;
          }

          //testar
           	//valida campos obrigatórios
		     //echo 'tipo_entrada ' . $SolicitacaoGcomOperador->tipo_entrada . "<br/>";
		     //echo 'id_contrato_mae' . $SolicitacaoGcomOperador->id_contrato_mae . "<br/>";
		     //echo 'data_assinatura_doc' . $SolicitacaoGcomOperador->data_assinatura_doc . "<br/>";
		     //echo 'numero_documento' . $SolicitacaoGcomOperador->numero_documento . "<br/>";
		     //echo 'id_sistema_validacao' . $SolicitacaoGcomOperador->id_sistema_validacao . "<br/>";
		     //echo 'n_vantive' . $SolicitacaoGcomOperador->n_vantive . "<br/>";   
		     //echo 'id_produto' . $SolicitacaoGcomOperador->id_produto . "<br/>";
		     //echo 'data_tratativa' . $SolicitacaoGcomOperador->data_tratativa . "<br/>";
		     //echo 'nome_solicitante' . $SolicitacaoGcomOperador->nome_solicitante . "<br/>";
		     //echo 'numero_wcd' . $SolicitacaoGcomOperador->numero_wcd . "<br/>";
		     //echo 'razao_social' . $SolicitacaoGcomOperador->razao_social . "<br/>";
		     //echo 'cnpj' . $SolicitacaoGcomOperador->cnpj . "<br/>";
		     //echo 'plano_solicitado' . $SolicitacaoGcomOperador->plano_solicitado . "<br/>";
		     //echo 'qtde_acesso' . $SolicitacaoGcomOperador->qtde_acesso . "<br/>";
		     //echo 'data_finalizacao' . $SolicitacaoGcomOperador->data_finalizacao . "<br/>"; 
		     //exit();     
     }      
}
?>
 