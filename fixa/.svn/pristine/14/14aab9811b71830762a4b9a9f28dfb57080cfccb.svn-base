<?php

class SolicitacaoPosTramitacao {
	   public $id_usuario_pos_tramitacao;      
     public $siscom;                     
     public $id_canal_entrada;           
     public $id_produto;                 
     public $tipo_solicitacao;        
     public $id_servicos;                
     public $cnpj;                       
     public $razao_social;               
     public $qtd_acessos;               
     public $n_gestao_servicos;          
     public $motivo_devolucao;        
     public $obs;                        
     public $data_entrada_siscom;        
     public $oportunidade;               
     public $proposta;                   
     public $contrato_mae;               
     public $data_recebimento_pos;      
     public $data_finalizado;           
     public $status;                     
     public $reg_dt_entrada;
     public $revisao;
     public $complemento_tipo_solicitacao;        


     //constroi solicitacao
     function constroiSolicitacaoPosTramitacao(SolicitacaoPosTramitacao $solicitacao, $id_usuario_pos_tramitacao, $siscom, $oportunidade, $proposta, $contrato_mae, $data_recebimento_pos, $data_finalizado, $obs, $status, $reg_dt_entrada)
     {
          $solicitacao->id_usuario_pos_tramitacao      = $id_usuario_pos_tramitacao;
          $solicitacao->siscom                         = $siscom;
          $solicitacao->oportunidade                   = $oportunidade;
          $solicitacao->proposta                       = $proposta;
          $solicitacao->contrato_mae                   = $contrato_mae;
          $solicitacao->data_recebimento_pos           = $data_recebimento_pos;
          $solicitacao->data_finalizado                = $data_finalizado;
          $solicitacao->obs                            = $obs;
          $solicitacao->status                         = $status;
          $solicitacao->reg_dt_entrada                 = $reg_dt_entrada;

          return $solicitacao;
     }

     function validaInputsObrigatorios(SolicitacaoPosTramitacao $SolicitacaoPosTramitacao)
     {
          if(
             empty($SolicitacaoPosTramitacao->oportunidade)                     ||
             empty($SolicitacaoPosTramitacao->proposta)                         ||
             empty($SolicitacaoPosTramitacao->contrato_mae)                     ||
             empty($SolicitacaoPosTramitacao->data_recebimento_pos)             ||
             empty($SolicitacaoPosTramitacao->data_finalizado)                  ||
             empty($SolicitacaoPosTramitacao->status)                     
          )
          {
               return true;
          } 
     }

     function validaItensDevolucao($motivo_devolucao)
     {
          if(empty($motivo_devolucao))
          {
               return true;
          }
     }

     function buscaObjetoByIdSolicitacao(SolicitacaoPosTramitacao $solicitacao, $ids, $revisao)
     {
          $buscarsolicitacao=mysql_query("SELECT * FROM pos_tramitacao WHERE siscom = $ids AND revisao = $revisao");
                
           if(mysql_affected_rows() > 0)
           {
                 while($linha=mysql_fetch_array($buscarsolicitacao))
                 {      
                    $solicitacao->id_canal_entrada     =  $linha['id_canal_entrada'];            
                    $solicitacao->id_produto           =  $linha['id_produto'];                  
                    $solicitacao->tipo_solicitacao     =  $linha['tipo_solicitacao'];         
                    $solicitacao->complemento_tipo_solicitacao =  $linha['complemento_tipo_solicitacao'];                 
                    $solicitacao->cnpj                 =  $linha['cnpj'];                       
                    $solicitacao->razao_social         =  $linha['razao_social'];                
                    $solicitacao->qtd_acessos          =  $linha['qtd_acessos'];                 
                    $solicitacao->n_gestao_servicos    =  $linha['n_gestao_servicos'];                   
                    $solicitacao->data_entrada_siscom  =  $linha['data_entrada_siscom'];
                 }
           }

           return $solicitacao;
     }

     function buscaObjetoCompletoByIdSolicitacao(SolicitacaoPosTramitacao $solicitacao, $ids, $revisao)
     {
          $buscarsolicitacao=mysql_query("SELECT * FROM pos_tramitacao WHERE siscom = $ids AND revisao = $revisao");
                
           if(mysql_affected_rows() > 0)
           {
                 while($linha=mysql_fetch_array($buscarsolicitacao))
                 {
                    $solicitacao->id_usuario_pos_tramitacao = $linha['id_usuario_pos_tramitacao'];     
                    $solicitacao->siscom                    = $linha['siscom'];     
                    $solicitacao->id_canal_entrada          = $linha['id_canal_entrada'];     
                    $solicitacao->id_produto                = $linha['id_produto'];     
                    $solicitacao->tipo_solicitacao          = $linha['tipo_solicitacao'];     
                    $solicitacao->id_servicos               = $linha['id_servicos'];     
                    $solicitacao->cnpj                      = $linha['cnpj'];     
                    $solicitacao->razao_social              = $linha['razao_social'];     
                    $solicitacao->qtd_acessos               = $linha['qtd_acessos'];     
                    $solicitacao->n_gestao_servicos         = $linha['n_gestao_servicos'];     
                    $solicitacao->motivo_devolucao          = $linha['motivo_devolucao'];     
                    $solicitacao->obs                       = $linha['obs'];     
                    $solicitacao->data_entrada_siscom       = $linha['data_entrada_siscom'];     
                    $solicitacao->oportunidade              = $linha['oportunidade'];     
                    $solicitacao->proposta                  = $linha['proposta'];     
                    $solicitacao->contrato_mae              = $linha['contrato_mae'];     
                    $solicitacao->data_recebimento_pos      = $linha['data_recebimento_pos'];     
                    $solicitacao->data_finalizado           = $linha['data_finalizado'];     
                    $solicitacao->status                    = $linha['status'];     
                    $solicitacao->reg_dt_entrada            = $linha['reg_dt_entrada'];
                    $solicitacao->revisao                   = $linha['revisao'];   
                 }
           }

           return $solicitacao;
     }
}
?>